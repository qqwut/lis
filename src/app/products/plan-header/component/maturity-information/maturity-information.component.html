<div class="card mt-2">
  <p-divider>
    <div class="inline-flex align-items-center">
      <button
        pButton
        pRipple
        ype="button"
        class="p-button-secondary p-button-outlined"
        (click)="collapse = !collapse"
      >
        <b class="header-button"> Maturity Information </b>
      </button>
      <span
        pButton
        pRipple
        type="button"
        class="p-button-secondary p-button-text"
        (click)="displayModal = true"
      >
        <b class="show-modal">(Show Field Definition)</b>
      </span>
    </div>
  </p-divider>

  <p-table
    [value]="product"
    styleClass="p-datatable-striped"
    responsiveLayout="scroll"
    [hidden]="!collapse"
  >
    <ng-template pTemplate="body" let-product>
      <tr>
        <td style="width: 20%">Maturity Calculation</td>
        <td style="width: 30%" class="td-active">
          <b>{{ product?.reinstIntRtId }}</b>
        </td>
        <td style="width: 20%">Plan Maturity Age</td>
        <td style="width: 30%" class="td-active">
          <b>{{ product?.rpuTbacId }}</b>
        </td>
      </tr>

      <tr>
        <td style="width: 20%">Plan Maturity Year</td>
        <td style="width: 30%" class="td-active">
          <b>{{ product?.reinstIntRtId }}</b>
        </td>
        <td style="width: 20%">Sum Insured</td>
        <td style="width: 30%" class="td-active">
          <b>{{ product?.rpuTbacId }}</b>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<!-- MODAL -->
<p-dialog
  header="Field Definition"
  [(visible)]="displayModal"
  [modal]="true"
  [style]="{ width: '90vw' }"
  [draggable]="false"
  [resizable]="false"
>
  <p-scrollPanel [style]="{ width: '100%', height: '50%' }">
    <p-table
      [value]="product"
      styleClass="p-datatable-striped"
      responsiveLayout="scroll"
    >
      <ng-template pTemplate="body" let-product>
        <tr>
          <td style="width: 20%">
            <b>Maturity Calculation</b>
            <p>(MAT_DT_CALC_CD)</p>
          </td>
          <td style="width: 80%">
            This field defines whether the plan matures at an age or in a given
            number of years from date of issue.
            <ul>
              Allowed Value Description
              <li>0 Does not mature; default value</li>
              <li>A Matures in a given number of years</li>
              <li>B Matures at a given attained age</li>
              <li>C Matures at a given attained age (calendar year end)</li>
              <li>
                D Matures on the monthiversary following the given attained age
              </li>
              <li>
                E Matures at the earlier of a given number of years and the
                policy anniversary following a given attained age
              </li>
            </ul>
          </td>
        </tr>

        <tr>
          <td style="width: 20%">
            <b>Plan Maturity Age</b>
            <p>(PLAN_MAT_AGE)</p>
          </td>
          <td style="width: 80%">
            If this plan is sold as a base coverage, this field defines age the
            plan matures.
            <p>
              If the maturity type code is B, C, D or E, then enter the age at
              which the plan matures.
            </p>
            Default value is zero.
          </td>
        </tr>

        <tr>
          <td style="width: 20%">
            <b>Plan Maturity Year</b>
            <p>(PLAN_MAT_AGE_DUR)</p>
          </td>
          <td style="width: 80%">
            If this plan is sold as a base coverage, this field defines the
            number of years from issue date to maturity.
            <p>
              If the maturity type code is A or E, then enter the number of
              years to maturity.
            </p>
            Default value is zero.
          </td>
        </tr>

        <tr>
          <td style="width: 20%">
            <b>Sum Insured</b>
            <p>SUM_INS_CALC_CD</p>
          </td>
          <td style="width: 80%">
            Code to define calculation of insurance in-force. Default value is
            zero.
            <ul>
              Allowed Value Description
              <li>0 Sum insured = Face amount; default value</li>
              <li>1 Table sum insured: from UV table</li>
              <li>2 Sum insured = 0</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td style="width: 20%">
            <b>MATURITIES</b>
          </td>
          <td style="width: 80%">
            The term “maturity” is applicable to policies with equity (i.e.,
            whole life). A policy maturity is almost always processed by the
            system in the automatic processing run, according to the information
            stored in the MATURITY CODE and MATURITY YEARS fields, or in the
            MATURITY CODE and MATURITY AGE fields on PLAN-07. The system will
            calculate and account for maturity value on applicable plans.
            <p>
              When a policy matures, the policyholder receives the proceeds of
              the policy.
            </p>
            <p>
              <b>Automatic Processing</b>
            </p>
            <p>
              A policy maturity is processed through the automatic processing
              run under the following conditions:
            </p>
            <ul>
              <li>The policy is in force (status code 1, 2, 3, 4).</li>
              <li>
                The maturity/expiry date is present and is less than or equal to
                the processing date.
              </li>
              <li>The billing method is not 9 (APL).</li>
              <li>The MATURITY CODE field on PLAN-07 is not 0.</li>
              <li>
                To mature a policy, use coverage 00. To mature an individual
                coverage, use that coverage number.
              </li>
            </ul>
            <p>
              Sixty days prior to the automatic processing of a maturity, the
              system checks the maturity/expiry date. If this date minus two
              months is equal to or prior to the processing date, and the
              MATURITY CODE is not 0, a notice stating maturity in 60 days will
              be produced. A letter is also produced. See “Client Inquiries and
              Multiple Policy Updates”. Although maturities are almost always
              automatically processed, they can be done online on the TERM
              screen.
            </p>
            <p>
              <b>Online Processing</b>
            </p>
            A maturity can be performed on either a policy level or a coverage
            level on the TERM screen. To do so, enter the policy number, suffix,
            first four letters of the policyholder’s last name, the coverage
            number applicable (00 for the whole policy or the coverage number
            for an individual coverage), the effective date of maturity, and the
            code NR (for maturity). The maturity date can be viewed under the
            MAT/EXP field on the POLI-CL or POLI-CH screen, or under the
            MAT/EXPRY field on the POLC or PLCD screen. The SUB-CODE field
            should be left blank and the BYPASS TAX WH field should be left as
            N. If a cheque is to be produced, enter a Y in the CHEQUE field.
            <p>
              For backdated maturities, the system will reverse any premiums
              paid past the effective date and place the money in premium
              suspense.
            </p>
            <p>
              <b>Calculation</b>
            </p>
            <ul>
              The maturity payout is calculated as follows: Sum insured
              <li>(Loan amount + Accrued interest)</li>
              <li>(Automatic premium loan amount + Accrued interest)</li>
              <li>Miscellaneous suspense</li>
              <li>Premium suspense</li>
              <li>Previous disbursement amount</li>
              <li>(Dividends on deposit + Accrued interest)</li>
              <li>(Premium deposit fund + Accrued interest)</li>
              <li>Tax withholding amount</li>
            </ul>
            <p>
              <b>Fields Updated</b>
            </p>
            <p>
              Once a policy maturity is processed on the TERM screen, the status
              code is automatically updated to F for all coverages. The same
              transaction done on the coverage level updates the status code to
              F on the matured coverage only. All other coverages remain
              unchanged.>/p> In addition, the maturity/expiry date on POLI-CL,
              POLI-CH, POLC, or PLCD will be updated to reflect the date of the
              maturity.
            </p>
            <p>
              <b> Accounting Generated </b>
            </p>
            <p>
              Since there is equity on the policy involved, a policy maturity
              transaction generates accounting entries. The maturity value is
              either automatically cleared to an outstanding disbursements
              account (the DISBURSEMENTS field on the POLI-VO screen) or can be
              used to generate a cash disbursement by entering a Y in the CHEQUE
              field of the TERM screen. The following accounting entries are
              generated:
            </p>
            <ul>
              <li>DR Policy Account</li>
              <li>CR Outstanding Disbursements</li>
            </ul>
            <p>
              Entries are also generated for policies with outstanding loans,
              APLs, dividends on deposit, PDFs, cash in suspense, and/or paid-up
              additions. Commission accounting records are generated to reflect
              any adjustments necessary on the agent statement (see also the
              “Agency” chapter). Movement of business records are created
              automatically. These records, including account numbers, can be
              viewed on the TRIN screen.
            </p>
            <p>
              <b> Reports </b>
            </p>
            <ul>
              For policy maturities, the following report is produced:
              <li>Policy Status Changes (CSBM0228)</li>
            </ul>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <p-scrollTop
      target="parent"
      styleClass="custom-scrolltop"
      [threshold]="100"
      icon="pi pi-arrow-up"
    >
    </p-scrollTop>
  </p-scrollPanel>
  <ng-template pTemplate="footer"> </ng-template>
</p-dialog>
